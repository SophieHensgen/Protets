---
title: "SMO-Bad Publicity"
author: "Sophie Hensgen"
date: "6/24/2020"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r packagest, include=FALSE}
library(foreign)
library(dplyr)
library(ggplot2)
library(tidyr)
```

```{r data set, echo=FALSE}
prodat <- read.dta("/Users/sophiehensgen/Webscraping-LS-Methode/Protets/prodat_1950-2002_OG.dta")
prodat

```
```{r data set, echo=FALSE}
#new data set with all the important variables

p <-  select(prodat, pen, nclaim1, nclaim2, jahrn, monatn, tagn, etag, tini, tinitx1, tinitx2, tinico1, tinico2, tinifu1, tinifu2, tverb, tverb1, tverb2, tverbco1, tverbco2, tverbfu1, tverbfu1, kam, kamco, tallzahl, nclaim1, nclaim2, vstate, vstabe1, vstabe2, sstate, statbe1, statbe2, verletzt, tote, artzahl, etag, form1, form2, schaden, festnahm, ort1, ort2, brd1, brd2, zahl)



#p <- select(prodat, vstate, tverbco1, tverbco2, tinico1, tinico2, vstabe1, vstabe2, sstate, statbe1, statbe2)
p[p==""]<-NA
p$sstate <- as.integer(p$sstate)
p$vstate <- as.integer(p$vstate)
p <- p %>% replace_na(list(tverbco1 = "not", tverbco2 = "not", tinico1 = "not", tinico2 = "not", statbe1 = "not", statbe2 = "not", vstabe2 = "not", vstabe1 = "not", sstate = "not", vstate = "not", zahl = "not", verletzt = "not", tote = "not", artzahl = "not", etag = "not", festnahm = "not", schaden = "not", form1 = "not", form2 = "not"))
p


p <- p %>% mutate(bewert = coalesce(vstate, sstate)) %>%
           mutate(codeverb = coalesce(tverbco1, tverbco2)) %>%
           mutate(codeini = coalesce(tinico1, tinico2)) %>%
           mutate(bewertint = coalesce(vstabe1, vstabe2)) %>%
           mutate(bewertpol = coalesce(statbe1, statbe2)) %>%
           mutate(form = coalesce(form1, form2)) %>%
         select(bewert, codeini, codeverb, bewertint, bewertpol, zahl, verletzt, tote, artzahl, etag, festnahm, schaden, form)



p[p=="not"]<-NA
p
p$codeini <- as.integer(p$codeini)
p$codeverb <- as.integer(p$codeverb)
p$bewertint <- as.integer(p$bewertint)
p$bewertpol <- as.integer(p$bewertpol)
p$zahl <- as.integer(p$zahl)
p$verletzt <- as.integer(p$verletzt)
p$tote <- as.integer(p$tote)
p$artzahl <- as.integer(p$artzahl)
p$festnahm <- as.integer(p$festnahm)
p$schaden <- as.integer(p$schaden)
p$form<- as.integer(p$form)
p <- p %>% replace_na(list(codeini = "not", codeverb = "not", bewertint = "not", bewertpol = "not", verletzt = "not", tote = "not", artzahl = "not", etag = "not", festnahm = "not", schaden = "not", form1 = "not", form2 = "not"))
p <- na.omit(p, cols=="vstate")
p <- na.omit(p, cols=="zahl")

p[p=="not"]<-NA
p

```

```{r Creation of new Variable, include=FALSE}
#Variables I will use to find out which protest belong together

#- PEN --> Protestereignisnummer
#- NCLAIM1--> Themenfeld 
#- BEWEG --> Bewegung
#- BEWEG1 & BEWEG2 --> Welche Bewegung
#- OBJEKT1 & OBJEKT2 --> Gegen wen richtet es sich?
#- JAHRN --> Jahr
#- MONATN --> Monat
#- TAGN --> Tag
#- ETAG --> Ereignistag (Wochentag)
#- TINI --> Initiativen, Gruppen und Netzwerke 
#- TINITX1 & TINITX2 --> Name 
#- TINICO1 & TINICO2 --> Codenummer
#- TINIFU1 & TINIFU2 --> Veranstalter
#- TVERB --> Gewerkschaften, Verbände, Kirchen
#- TVERB1 & TVERB2 --> Name
#- TVERBCO1 & TVERBCO2 --> Codenummer
#- KAM --> Ist PE Teil einer Kampagne?
#- KAMCO --> Kampagnennummer
```

```{r dependent variable, include=FALSE}
#Dependent Variable: 
#- New Variable which says which protests belongs together
#- ZAHL --> Anzahl der Teilnehmer
```
```{r independent variables, echo=FALSE}
#Independent Variables:

#Evaluation interest group
#- VSTATE --> Statements von Interessengruppen
#- VSTABE1 & VSTABE2 --> Bewertung
```

```{r independent variables, echo=FALSE}
#Independent Variables:

#Evaluation political side
#- SSTATE --> Statements von politischadministrativer Seite
#- STATBE1 & STATBE2 --> Bewertung
```

```{r controll variables - Injuries, include=FALSE}
#Injured during the Protest
#- VERLETZT --> Verletzte?

```

```{r control variable - Deaths, include=FALSE}
#Death during the Protest
#- TOTE --> Tote im generellen
```

```{r control variables - Gegenproteste, include=FALSE}
#Gegenproteste:
#- AUSJA --> Gegenproteste
#- AUSPEN --> Gegen wen Gegenproteste
#- GEGJA --> Ist PE ein Gegenprotest?
#- GEGENPEN --> Gegen wen?
```

```{r control variables - News Coverage, include=FALSE}
#News Coverage
#- ARTZAHL --> Artikelanzahl
```

```{r control variables - Day of week, include=FALSE}
#Day of Protest
#- ETAG --> Ereignistag (Wochentag)
```

```{r control variables - Activity, include=FALSE}
#Aktionsform
#- FORM1 & FORM21 --> Aktionsform
prodat$form1
prodat$form2
```

```{r control variables - Property damage, include=FALSE}
#Sachbeschädigung
#- SCHADEN --> Sachbeschädigung
prodat$schaden
```

```{r control variables - Arrests, include=FALSE}
#Festnahmen
#- FESTNAHM --> Wie viele Festnehmen
prodat$festnahm

```

```{r control variables - Area, include=FALSE}
#Area
#- ORT1 & ORT2c --> Hauptorte
#- BRD1 & BRD2 --> West/Ost
```















